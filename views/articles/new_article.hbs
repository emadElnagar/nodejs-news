<section class="py-5">
  <div class="container">
    <form action="/articles/new" class="shadow mx-auto px-4 py-5 w-100" method="post" enctype="multipart/form-data">
      <h1 class="text-center text-capitalize">create new article</h1>
      
      <div class="field d-flex flex-column-reverse mt-2">
        <input id="title" type="text" name="title" class="w-100" required>
        <label for="title">title</label>
      </div>
      
      <div class="field d-flex flex-column-reverse mt-2">
        <textarea id="subject" type="text" name="subject" class="w-100" required></textarea>
        <label for="subject">subject</label>
      </div>
      
      <div class="d-flex flex-column-reverse mt-2">
        <div class="button-wrap">
          <input id="image" name="image" type="file" required>
          <label class="material-icons btn btn-dark px-5 fs-4" for="image">local_see</label>
        </div>
      </div>

      <div class="d-flex flex-column-reverse mt-2">
        <select id="category" name="category">
          {{#each categories}}
            {{#each this}}
              <option value="{{this.title}}">{{this.title}}</option>
            {{/each}}
          {{/each}}
        </select>
        <label for="category">category</label>
      </div>

      <input type="submit" class="btn btn-warning mt-3 text-capitalize" value="post">
    </form>
    {{#each messages}}
      <div class="d-flex justify-content-center">
        <div class="alert alert-danger text-center mt-3 form-alert" role="alert">
          {{this}}
        </div>
      </div>
    {{/each}}
  </div>
</section>

<section class="py-5">
  <div class="container">
    <img src="" alt="it's problem showing you image" id="demo-image" class="img-fluid d-none">
    <h1 id="demo-header" class="text-center text-capitalize py-3"></h1>
    <p id="demo-paragraph"></p>
  </div>
</section>

<script>
  // LIVE PREVIEW FOR ARTICLE
  const headerInput = document.getElementById('title');
  const demoHeader = document.getElementById('demo-header');
  const subjectInput = document.getElementById('subject');
  const demoSubject = document.getElementById('demo-paragraph');
  const imageUpload = document.getElementById('image');
  headerInput.onchange = function () {
    demoHeader.innerText = this.value;
  }
  subjectInput.onchange = function () {
    demoSubject.innerText = this.value;
  }
  imageUpload.onchange = function () {
    const reader = new FileReader();
    reader.readAsDataURL(this.files[0]);
    reader.onload = function () {
      document.getElementById('demo-image').src = this.result;
      document.getElementById('demo-image').classList.remove('d-none');
    }
  }
</script>
