<section class="py-5">
  <div class="container">
    <div class="row">
      <div class="col-3">
        <div class="profile-img rounded-circle overflow-hidden border border-5 position-relative">
          <img
            src="{{profile.image}}"
            class="img-fluid"
            id="profile-image"
          >
          {{#if profile}}
            {{#if check}}
              <form
                id="profile-form"
                class="profile-img-form text-center position-absolute bottom-0 end-0 w-100"
                enctype="multipart/form-data"
                method="post"
                action="/users/profile-img-upload">
                <div class="d-flex flex-column-reverse mt-2">
                  <div class="button-wrap">
                    <input id="profile-img" name="image" type="file">
                    <label id="profile-label" class="material-icons img-upload btn btn-light px-3" for="profile-img">local_see</label>
                  </div>
                  <div id="profile-form-submition" class="d-none">
                    <button type="submit" class="btn btn-warning rounded-circle">
                      <span class="material-icons d-flex">done</span>
                    </button>
                    <a href="/users/profile/{{profile.id}}" class="btn btn-danger rounded-circle">
                      <span class="material-icons d-flex">close</span>
                    </a>
                  </div>
                </div>
              </form>
            {{/if}}
          {{/if}}
        </div>
        <h3 class="mt-4 text-capitalize text-center">{{profile.firstName}} {{profile.lastName}}</h3>
      </div>
      <div class="col-9"></div>
    </div>
  </div>
</section>

<script>
  // LIVE PREVIEW FOR PROFILE IMAGE CHANGE
  let profileInput = document.getElementById('profile-img');
  let profileLabel = document.getElementById('profile-label');
  let profileFormSubmition = document.getElementById('profile-form-submition');
  let profileForm = document.getElementById('profile-form');
  profileInput.onchange = function () {
    const reader = new FileReader();
    reader.readAsDataURL(this.files[0]);
    reader.onload = function () {
      document.getElementById('profile-image').src = this.result;
      profileLabel.classList.add('d-none');
      profileFormSubmition.classList.remove('d-none');
      profileForm.classList.add('active-form');
    }
  }
</script>
